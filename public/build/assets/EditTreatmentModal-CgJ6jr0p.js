import{c as $,r as G,u as J,j as s}from"./app-CN3BbJ5b.js";import{B}from"./button-C7NEJwXC.js";import{d as K,e as L,b as Q,c as U,D as V,a as X}from"./dialog-fHWdycNU.js";import{I as M}from"./input-DxGc0FAF.js";import{T as Y}from"./textarea-CQwmzCvL.js";import{c as Z}from"./index-CZjjwbrG.js";import{S as ee}from"./square-pen-DwcT1mpI.js";import{C as te}from"./circle-plus-D7Jd6lRP.js";/* empty css            */import"./index-DaLjAgKf.js";import"./index-B_ayM8w2.js";import"./utils-Dt8dQi6c.js";import"./index-fxJJ1D40.js";import"./index-BpvnwpBx.js";import"./index-HyMYkPDM.js";import"./index-BPocjY7g.js";import"./index-B2-ZojZD.js";import"./x-DOjlAHZp.js";import"./createLucideIcon-Cvhmgf6U.js";import"./index-CMWG4mbA.js";function _e(a){const e=$.c(58),{Treatment:l,patientId:F}=a,[O,P]=G.useState(!1),W=l.title,R=l.description??"";let r;e[0]!==l.steps?(r=l.steps.map(se),e[0]=l.steps,e[1]=r):r=e[1];let _;e[2]!==l.title||e[3]!==R||e[4]!==r?(_={title:W,description:R,steps:r},e[2]=l.title,e[3]=R,e[4]=r,e[5]=_):_=e[5];const t=J(_);let y;e[6]!==t?(y=()=>{t.setData("steps",[...t.data.steps,{title:"",cost:0,status:"pending"}])},e[6]=t,e[7]=y):y=e[7];const q=y;let C;e[8]!==l.id||e[9]!==t||e[10]!==F?(C=()=>{t.put(Z.patient.treatments.update({patient:F,treatment:Number(l.id)}).url,{preserveScroll:!0,onSuccess:()=>P(!1)})},e[8]=l.id,e[9]=t,e[10]=F,e[11]=C):C=e[11];const A=C;let D;e[12]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsx(L,{asChild:!0,children:s.jsxs(B,{size:"sm",variant:"outline",children:[s.jsx(ee,{})," Edit"]})}),e[12]=D):D=e[12];let T;e[13]===Symbol.for("react.memo_cache_sentinel")?(T={maxWidth:"36rem"},e[13]=T):T=e[13];let E;e[14]===Symbol.for("react.memo_cache_sentinel")?(E=s.jsx(Q,{children:s.jsx(U,{children:"Edit Treatment"})}),e[14]=E):E=e[14];let o;e[15]!==t?(o=i=>t.setData("title",i.target.value),e[15]=t,e[16]=o):o=e[16];let c;e[17]!==t.data.title||e[18]!==o?(c=s.jsx(M,{value:t.data.title,onChange:o,placeholder:"Treatment title"}),e[17]=t.data.title,e[18]=o,e[19]=c):c=e[19];let n;e[20]!==t.errors.title?(n=t.errors.title&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:t.errors.title}),e[20]=t.errors.title,e[21]=n):n=e[21];let m;e[22]!==c||e[23]!==n?(m=s.jsxs("div",{className:"flex flex-col space-y-1",children:[c,n]}),e[22]=c,e[23]=n,e[24]=m):m=e[24];let p;e[25]!==t?(p=i=>t.setData("description",i.target.value),e[25]=t,e[26]=p):p=e[26];let d;e[27]!==t.data.description||e[28]!==p?(d=s.jsx(Y,{value:t.data.description,onChange:p,placeholder:"Description"}),e[27]=t.data.description,e[28]=p,e[29]=d):d=e[29];let f;e[30]!==t.errors.description?(f=t.errors.description&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:t.errors.description}),e[30]=t.errors.description,e[31]=f):f=e[31];let x;e[32]!==d||e[33]!==f?(x=s.jsxs("div",{className:"flex flex-col space-y-1",children:[d,f]}),e[32]=d,e[33]=f,e[34]=x):x=e[34];let k;e[35]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx("p",{className:"text-sm font-medium",children:"Steps"}),e[35]=k):k=e[35];let u;e[36]!==t?(u=t.data.steps.map((i,N)=>s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-x-2",children:[s.jsx(M,{disabled:i.status==="done",value:i.title,onChange:H=>{const S=[...t.data.steps];S[N].title=H.target.value,t.setData("steps",S)}}),s.jsx(M,{type:"number",disabled:i.status==="done",value:i.cost,onChange:H=>{const S=[...t.data.steps];S[N].cost=Number(H.target.value),t.setData("steps",S)},className:"w-32"})]}),t.errors.steps?.[N]&&s.jsx("p",{className:"text-sm text-red-600 mt-1",children:t.errors.steps?.[N]})]},i.id??N+1)),e[36]=t,e[37]=u):u=e[37];let I;e[38]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(te,{}),e[38]=I):I=e[38];let h;e[39]!==q?(h=s.jsxs(B,{variant:"ghost",size:"sm",onClick:q,children:[I,"  Add step"]}),e[39]=q,e[40]=h):h=e[40];let j;e[41]!==u||e[42]!==h?(j=s.jsxs("div",{className:"space-y-2",children:[k,u,h]}),e[41]=u,e[42]=h,e[43]=j):j=e[43];let g;e[44]!==m||e[45]!==x||e[46]!==j?(g=s.jsxs("div",{className:"space-y-4",children:[m,x,j]}),e[44]=m,e[45]=x,e[46]=j,e[47]=g):g=e[47];let w;e[48]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx(B,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e[48]=w):w=e[48];let v;e[49]!==t.processing||e[50]!==A?(v=s.jsxs(K,{children:[w,s.jsx(B,{onClick:A,disabled:t.processing,children:"Save"})]}),e[49]=t.processing,e[50]=A,e[51]=v):v=e[51];let b;e[52]!==g||e[53]!==v?(b=s.jsxs(V,{className:"max-w-xl",style:T,children:[E,g,v]}),e[52]=g,e[53]=v,e[54]=b):b=e[54];let z;return e[55]!==O||e[56]!==b?(z=s.jsxs(X,{open:O,onOpenChange:P,children:[D,b]}),e[55]=O,e[56]=b,e[57]=z):z=e[57],z}function se(a){return{id:a.id,title:a.title,cost:a.cost,status:a.status}}export{_e as default};

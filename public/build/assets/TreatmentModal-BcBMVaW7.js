import{c as ae,r as ie,u as re,j as t}from"./app-CN3BbJ5b.js";import{B as A}from"./button-C7NEJwXC.js";import{b as oe,c as ce,D as ne,a as me}from"./dialog-fHWdycNU.js";import{I as L}from"./input-DxGc0FAF.js";import{L as I}from"./label-BAmIZs5g.js";import{c as de}from"./index-CZjjwbrG.js";import{t as fe}from"./index-C4vEbMH5.js";import he from"./ToothChart-JmYpbH2o.js";import{C as se}from"./circle-plus-D7Jd6lRP.js";import{C as pe}from"./circle-x-qblXZ9ZK.js";import{L as xe}from"./loader-circle-yCDM4bKH.js";/* empty css            */import"./index-DaLjAgKf.js";import"./index-B_ayM8w2.js";import"./utils-Dt8dQi6c.js";import"./index-fxJJ1D40.js";import"./index-BpvnwpBx.js";import"./index-HyMYkPDM.js";import"./index-BPocjY7g.js";import"./index-B2-ZojZD.js";import"./x-DOjlAHZp.js";import"./createLucideIcon-Cvhmgf6U.js";import"./index-B2Vp4zyf.js";import"./index-CMWG4mbA.js";function Oe(le){const e=ae.c(83),{patientId:Q}=le,[V,U]=ie.useState(!1);let q;e[0]===Symbol.for("react.memo_cache_sentinel")?(q=[],e[0]=q):q=e[0];let E;e[1]===Symbol.for("react.memo_cache_sentinel")?(E={teeth:q,title:"",description:"",steps:[{id:crypto.randomUUID(),name:"Consultation",cost:0,note:""}]},e[1]=E):E=e[1];const{data:s,setData:a,post:Y,processing:m,errors:c,reset:d}=re(E);let F;e[2]!==Q||e[3]!==Y||e[4]!==d?(F=l=>{l.preventDefault(),Y(de.patient.treatments.store(Number(Q)).url,{onSuccess:()=>{fe.success("Treatment created successfully"),U(!1),d()}})},e[2]=Q,e[3]=Y,e[4]=d,e[5]=F):F=e[5];const Z=F;let R;e[6]!==s.steps||e[7]!==a?(R=()=>{a("steps",[...s.steps,{id:crypto.randomUUID(),name:"",cost:0,note:""}])},e[6]=s.steps,e[7]=a,e[8]=R):R=e[8];const ee=R;let z;e[9]!==s.steps||e[10]!==a?(z=l=>{s.steps.length>1&&a("steps",s.steps.filter(i=>i.id!==l))},e[9]=s.steps,e[10]=a,e[11]=z):z=e[11];const k=z;let B;e[12]!==s.steps||e[13]!==a?(B=(l,i,r)=>{const o=[...s.steps];o[l]={...o[l],[i]:r},a("steps",o)},e[12]=s.steps,e[13]=a,e[14]=B):B=e[14];const n=B;let O;e[15]!==s.teeth||e[16]!==a?(O=l=>{if(l===-1){a("teeth",[]);return}if(Array.isArray(l)){const r=Array.from(new Set([...s.teeth,...l])).sort();a("teeth",r);return}const i=[...s.teeth];i.includes(l)?a("teeth",i.filter(r=>r!==l)):a("teeth",[...i,l].sort())},e[15]=s.teeth,e[16]=a,e[17]=O):O=e[17];const te=O;let P;e[18]===Symbol.for("react.memo_cache_sentinel")?(P=t.jsxs(A,{onClick:()=>U(!0),children:[t.jsx(se,{className:"mr-2 h-4 w-4"})," New Treatment"]}),e[18]=P):P=e[18];let f;e[19]!==d?(f=l=>{U(l),l||d()},e[19]=d,e[20]=f):f=e[20];let H;e[21]===Symbol.for("react.memo_cache_sentinel")?(H={maxWidth:800},e[21]=H):H=e[21];let M;e[22]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(oe,{children:t.jsx(ce,{children:"New Treatment Plan"})}),e[22]=M):M=e[22];let W;e[23]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx(I,{htmlFor:"title",children:"Treatment Title"}),e[23]=W):W=e[23];let h;e[24]!==a?(h=l=>a("title",l.target.value),e[24]=a,e[25]=h):h=e[25];let p;e[26]!==s.title||e[27]!==h?(p=t.jsx(L,{id:"title",placeholder:"e.g. Root Canal",value:s.title,onChange:h}),e[26]=s.title,e[27]=h,e[28]=p):p=e[28];let x;e[29]!==c.title?(x=c.title&&t.jsx("p",{className:"text-xs text-destructive",children:c.title}),e[29]=c.title,e[30]=x):x=e[30];let u;e[31]!==p||e[32]!==x?(u=t.jsxs("div",{className:"space-y-2",children:[W,p,x]}),e[31]=p,e[32]=x,e[33]=u):u=e[33];let X;e[34]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(I,{htmlFor:"desc",children:"Description"}),e[34]=X):X=e[34];let j;e[35]!==a?(j=l=>a("description",l.target.value),e[35]=a,e[36]=j):j=e[36];let g;e[37]!==s.description||e[38]!==j?(g=t.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.jsxs("div",{className:"space-y-2",children:[X,t.jsx(L,{id:"desc",placeholder:"Notes...",value:s.description,onChange:j})]})}),e[37]=s.description,e[38]=j,e[39]=g):g=e[39];let y;e[40]!==s.teeth.length?(y=t.jsxs("label",{className:"text-sm font-semibold flex justify-between",children:["Target Teeth",t.jsxs("span",{className:"text-xs font-normal text-slate-500",children:[s.teeth.length," teeth selected"]})]}),e[40]=s.teeth.length,e[41]=y):y=e[41];let N;e[42]!==s.teeth||e[43]!==te?(N=t.jsx(he,{selectedTeeth:s.teeth,onToggle:te}),e[42]=s.teeth,e[43]=te,e[44]=N):N=e[44];let v;e[45]!==c.teeth?(v=c.teeth&&t.jsx("p",{className:"text-xs text-red-500",children:c.teeth}),e[45]=c.teeth,e[46]=v):v=e[46];let b;e[47]!==y||e[48]!==N||e[49]!==v?(b=t.jsxs("div",{className:"space-y-2",children:[y,N,v]}),e[47]=y,e[48]=N,e[49]=v,e[50]=b):b=e[50];let $;e[51]===Symbol.for("react.memo_cache_sentinel")?($=t.jsx(I,{children:"Treatment Steps"}),e[51]=$):$=e[51];let C;if(e[52]!==s.steps||e[53]!==k||e[54]!==n){let l;e[56]!==s.steps.length||e[57]!==k||e[58]!==n?(l=(i,r)=>t.jsxs("div",{className:"flex gap-x-2 items-center animate-in fade-in slide-in-from-top-1",children:[t.jsxs("div",{className:"flex flex-col justify-center gap-y-1",children:[t.jsx(I,{children:"name"}),t.jsx(L,{className:"flex-2",placeholder:"Step name",value:i.name,onChange:o=>n(r,"name",o.target.value),required:!0})]}),t.jsxs("div",{className:"flex flex-col justify-center gap-y-1",children:[t.jsx(I,{className:"text-xs text-accent-foreground ",children:"Cost"}),t.jsx(L,{className:"flex-1",type:"number",placeholder:"Cost",value:i.cost,onChange:o=>n(r,"cost",Number(o.target.value)),required:!0})]}),t.jsxs("div",{className:"flex flex-col justify-center gap-y-1",children:[t.jsx(I,{className:"text-xs text-accent-foreground ",children:"note"}),t.jsx(L,{className:"flex-1",placeholder:"Note",value:i.note,onChange:o=>n(r,"note",o.target.value),required:!0})]}),t.jsx("div",{className:"flex flex-col justify-center",children:t.jsx(A,{type:"button",size:"icon",variant:"ghost",className:"text-destructive hover:text-red-700",onClick:()=>k(i.id),disabled:s.steps.length===1,children:t.jsx(pe,{className:"h-5 w-5"})})})]},i.id),e[56]=s.steps.length,e[57]=k,e[58]=n,e[59]=l):l=e[59],C=s.steps.map(l),e[52]=s.steps,e[53]=k,e[54]=n,e[55]=C}else C=e[55];let G;e[60]===Symbol.for("react.memo_cache_sentinel")?(G=t.jsx(se,{className:"mr-2 h-4 w-4"}),e[60]=G):G=e[60];let S;e[61]!==ee?(S=t.jsxs(A,{type:"button",variant:"outline",size:"sm",className:"w-full mt-2 border-dashed",onClick:ee,children:[G," Add Step"]}),e[61]=ee,e[62]=S):S=e[62];let _;e[63]!==C||e[64]!==S?(_=t.jsxs("div",{className:"space-y-3",children:[$,C,S]}),e[63]=C,e[64]=S,e[65]=_):_=e[65];let J;e[66]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(A,{type:"button",variant:"ghost",onClick:()=>U(!1),children:"Cancel"}),e[66]=J):J=e[66];let T;e[67]!==m?(T=m&&t.jsx(xe,{className:"mr-2 h-4 w-4 animate-spin"}),e[67]=m,e[68]=T):T=e[68];let w;e[69]!==m||e[70]!==T?(w=t.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[J,t.jsxs(A,{type:"submit",disabled:m,children:[T,"Create Treatment"]})]}),e[69]=m,e[70]=T,e[71]=w):w=e[71];let D;e[72]!==Z||e[73]!==u||e[74]!==g||e[75]!==b||e[76]!==_||e[77]!==w?(D=t.jsxs(ne,{className:"",style:H,children:[M,t.jsxs("form",{onSubmit:Z,className:"space-y-6 py-4",children:[u,g,b,_,w]})]}),e[72]=Z,e[73]=u,e[74]=g,e[75]=b,e[76]=_,e[77]=w,e[78]=D):D=e[78];let K;return e[79]!==V||e[80]!==D||e[81]!==f?(K=t.jsxs("div",{children:[P,t.jsx(me,{open:V,onOpenChange:f,children:D})]}),e[79]=V,e[80]=D,e[81]=f,e[82]=K):K=e[82],K}export{Oe as default};

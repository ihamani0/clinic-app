import{c as k,j as s,r as F,d as G}from"./app-CN3BbJ5b.js";import{b as B}from"./card-hahnXqXv.js";import{a as D}from"./utils-Dt8dQi6c.js";import{B as H}from"./button-C7NEJwXC.js";import{T as P}from"./textarea-CQwmzCvL.js";import{c as U}from"./index-CZjjwbrG.js";import{t as I}from"./index-C4vEbMH5.js";/* empty css            */import"./index-DaLjAgKf.js";import"./index-B_ayM8w2.js";import"./index-CMWG4mbA.js";const R={healthy:{label:"Healthy",className:"fill-white stroke-gray-400"},caries:{label:"Caries",className:"fill-orange-400 stroke-orange-600"},crown:{label:"Crown",className:"fill-blue-400 stroke-blue-600"},abutment:{label:"Abutment",className:"fill-yellow-400 stroke-yellow-600"},implant:{label:"Implant",className:"fill-purple-400 stroke-purple-600"},missing:{label:"Missing",className:"fill-red-500 stroke-red-700"},extracted:{label:"Extracted",className:"fill-gray-300 stroke-gray-500"}};function W(g){const e=k.c(9),{statusClass:n,isMissing:r,isAbutment:l}=g,a=`w-10 h-12 stroke-[3] ${n}`;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx("path",{d:"M20,30 Q10,30 10,50 L15,100 Q30,90 50,100 Q70,90 85,100 L90,50 Q90,30 80,30 Q70,10 50,10 Q30,10 20,30 Z"}),e[0]=i):i=e[0];let t;e[1]!==l?(t=l&&s.jsx("circle",{cx:"50",cy:"50",r:"15",className:"fill-white/50"}),e[1]=l,e[2]=t):t=e[2];let c;e[3]!==r?(c=r&&s.jsx("path",{d:"M20 20 L80 100 M80 20 L20 100",stroke:"white",strokeWidth:"6"}),e[3]=r,e[4]=c):c=e[4];let d;return e[5]!==a||e[6]!==t||e[7]!==c?(d=s.jsxs("svg",{viewBox:"0 0 100 120",className:a,children:[i,t,c]}),e[5]=a,e[6]=t,e[7]=c,e[8]=d):d=e[8],d}function Z(g){const e=k.c(23),{id:n,status:r,selected:l,onSelect:a,saving:i}=g,t=R[r];let c;e[0]!==n||e[1]!==a?(c=()=>a(n),e[0]=n,e[1]=a,e[2]=c):c=e[2];const d=l?"scale-110 -translate-y-1":"hover:scale-105";let o;e[3]!==d?(o=D("flex flex-col items-center transition",d),e[3]=d,e[4]=o):o=e[4];const b=r==="missing",u=r==="abutment";let f;e[5]!==t.className||e[6]!==b||e[7]!==u?(f=s.jsx(W,{statusClass:t.className,isMissing:b,isAbutment:u}),e[5]=t.className,e[6]=b,e[7]=u,e[8]=f):f=e[8];const h=l?"text-primary":"text-muted-foreground";let p;e[9]!==h?(p=D("text-xs font-semibold",h),e[9]=h,e[10]=p):p=e[10];let m;e[11]!==n||e[12]!==i?(m=i===n&&s.jsx("span",{className:"text-blue-500",children:"â³"}),e[11]=n,e[12]=i,e[13]=m):m=e[13];let x;e[14]!==n||e[15]!==p||e[16]!==m?(x=s.jsxs("span",{className:p,children:[n," ",m]}),e[14]=n,e[15]=p,e[16]=m,e[17]=x):x=e[17];let j;return e[18]!==c||e[19]!==x||e[20]!==o||e[21]!==f?(j=s.jsxs("button",{onClick:c,className:o,children:[f,x]}),e[18]=c,e[19]=x,e[20]=o,e[21]=f,e[22]=j):j=e[22],j}function $(g){const e=k.c(13),{teeth:n,state:r,selectedTooth:l,onSelect:a,saving:i}=g;let t;if(e[0]!==a||e[1]!==i||e[2]!==l||e[3]!==r||e[4]!==n){let d;e[6]!==a||e[7]!==i||e[8]!==l||e[9]!==r?(d=o=>s.jsx(Z,{id:o,status:r[o]?.status??"healthy",selected:l===o,onSelect:a,saving:i},o),e[6]=a,e[7]=i,e[8]=l,e[9]=r,e[10]=d):d=e[10],t=n.map(d),e[0]=a,e[1]=i,e[2]=l,e[3]=r,e[4]=n,e[5]=t}else t=e[5];let c;return e[11]!==t?(c=s.jsx("div",{className:"flex gap-1",children:t}),e[11]=t,e[12]=c):c=e[12],c}function q(g){const e=k.c(23),{selectedTooth:n,currentStatus:r,note:l,onNoteChange:a,onApply:i}=g;if(!n){let m;return e[0]===Symbol.for("react.memo_cache_sentinel")?(m=s.jsx("div",{className:"border-dashed border rounded-lg p-6 text-center text-muted-foreground",children:"Select a tooth to apply treatment"}),e[0]=m):m=e[0],m}let t;e[1]!==r||e[2]!==l||e[3]!==i?(t=()=>{i(r??"healthy",l??"")},e[1]=r,e[2]=l,e[3]=i,e[4]=t):t=e[4];const c=t;let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=Object.entries(R),e[5]=d):d=e[5];let o;e[6]!==r||e[7]!==l||e[8]!==i?(o=s.jsx("div",{className:"grid grid-cols-3 gap-3",children:d.map(m=>{const[x,j]=m;return s.jsx(H,{variant:r===x?"default":"outline",onClick:()=>i(x,l??""),children:j.label},x)})}),e[6]=r,e[7]=l,e[8]=i,e[9]=o):o=e[9];let b;e[10]!==a?(b=m=>a(m.target.value),e[10]=a,e[11]=b):b=e[11];let u;e[12]!==l||e[13]!==b?(u=s.jsx(P,{name:"note",placeholder:"Add any notes regarding the selected tooth here...",className:"mt-4",value:l,onChange:b}),e[12]=l,e[13]=b,e[14]=u):u=e[14];let f;e[15]!==c?(f=s.jsx("div",{className:"self-end",children:s.jsx(H,{variant:"default",className:"cursor-pointer",onClick:c,children:"Save"})}),e[15]=c,e[16]=f):f=e[16];let h;e[17]!==u||e[18]!==f?(h=s.jsxs("div",{className:"flex flex-col gap-y-4 mt-4",children:[u,f]}),e[17]=u,e[18]=f,e[19]=h):h=e[19];let p;return e[20]!==o||e[21]!==h?(p=s.jsxs(s.Fragment,{children:[o,h]}),e[20]=o,e[21]=h,e[22]=p):p=e[22],p}const z=[18,17,16,15,14,13,12,11],J=[21,22,23,24,25,26,27,28],K=[48,47,46,45,44,43,42,41],V=[31,32,33,34,35,36,37,38];function X(g){return g.reduce((e,n)=>(e[n.number]={status:n.status,note:n.note??""},e),{})}function Y(g){const e=k.c(43),{teeth:n,patient_id:r}=g;let l;e[0]!==n?(l=()=>X(n),e[0]=n,e[1]=l):l=e[1];const[a,i]=F.useState(l),[t,c]=F.useState(null),d=t?a[t]:void 0,[o,b]=F.useState(void 0);let u;e[2]!==r||e[3]!==t?(u=(A,C)=>{t&&(i(O=>({...O,[t]:{status:A,note:C}})),b(t),G.post(U.patient.teeth.updateSingle(r).url,{tooth_number:t,status:A,note:C},{preserveState:!0,preserveScroll:!0,only:[],onSuccess:ee,onError:()=>{i(O=>{const L={...O};return delete L[t],L}),I.error("Failed to update tooth")},onFinish:()=>{b(void 0)}}))},e[2]=r,e[3]=t,e[4]=u):u=e[4];const f=u;let h;e[5]!==t?(h=A=>{t&&i(C=>({...C,[t]:{...C[t],note:A}}))},e[5]=t,e[6]=h):h=e[6];const p=h;let m;e[7]!==o||e[8]!==t||e[9]!==a?(m=s.jsx($,{teeth:z,state:a,selectedTooth:t,onSelect:c,saving:o}),e[7]=o,e[8]=t,e[9]=a,e[10]=m):m=e[10];let x;e[11]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx("div",{className:"w-px bg-border"}),e[11]=x):x=e[11];let j;e[12]!==o||e[13]!==t||e[14]!==a?(j=s.jsx($,{teeth:J,state:a,selectedTooth:t,onSelect:c,saving:o}),e[12]=o,e[13]=t,e[14]=a,e[15]=j):j=e[15];let N;e[16]!==m||e[17]!==j?(N=s.jsxs("div",{className:"flex gap-8 border-b pb-4",children:[m,x,j]}),e[16]=m,e[17]=j,e[18]=N):N=e[18];let S;e[19]!==o||e[20]!==t||e[21]!==a?(S=s.jsx($,{teeth:K,state:a,selectedTooth:t,onSelect:c,saving:o}),e[19]=o,e[20]=t,e[21]=a,e[22]=S):S=e[22];let w;e[23]===Symbol.for("react.memo_cache_sentinel")?(w=s.jsx("div",{className:"w-px bg-border"}),e[23]=w):w=e[23];let v;e[24]!==o||e[25]!==t||e[26]!==a?(v=s.jsx($,{teeth:V,state:a,selectedTooth:t,onSelect:c,saving:o}),e[24]=o,e[25]=t,e[26]=a,e[27]=v):v=e[27];let y;e[28]!==v||e[29]!==S?(y=s.jsxs("div",{className:"flex gap-8 pt-4",children:[S,w,v]}),e[28]=v,e[29]=S,e[30]=y):y=e[30];let T;e[31]!==y||e[32]!==N?(T=s.jsxs(B,{className:"p-6",children:[N,y]}),e[31]=y,e[32]=N,e[33]=T):T=e[33];const M=d?.status,E=d?.note??"";let _;e[34]!==f||e[35]!==t||e[36]!==M||e[37]!==E||e[38]!==p?(_=s.jsx(B,{className:"p-6",children:s.jsx(q,{selectedTooth:t,currentStatus:M,note:E,onNoteChange:p,onApply:f})}),e[34]=f,e[35]=t,e[36]=M,e[37]=E,e[38]=p,e[39]=_):_=e[39];let Q;return e[40]!==T||e[41]!==_?(Q=s.jsxs("div",{className:"space-y-6",children:[T,_]}),e[40]=T,e[41]=_,e[42]=Q):Q=e[42],Q}function ee(){I.success("Tooth updated successfully")}function fe(g){const e=k.c(3),{teeth:n,patient_id:r}=g;let l;return e[0]!==r||e[1]!==n?(l=s.jsx("div",{children:s.jsx(Y,{teeth:n,patient_id:r})}),e[0]=r,e[1]=n,e[2]=l):l=e[2],l}export{fe as default};
